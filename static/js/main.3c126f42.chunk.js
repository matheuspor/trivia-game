(this["webpackJsonptrivia-game"]=this["webpackJsonptrivia-game"]||[]).push([[0],{126:function(e,t,n){},135:function(e,t){},137:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(37),c=n.n(i),s=(n(126),n(81)),o=n(47),l=n(25),u=n(191),d=n(19),j=n(27),b=n(28),h=n(35),p=n(34),m=n(203),x=n(180),O=n(204),f=n(199),g=n(200),v=n(63),y=n(201),S=n(1),k=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e="h6.fontSize",t=JSON.parse(localStorage.getItem("state")).player,n=t.picture,a=t.name,r=t.score,i=t.assertions,c=this.props.history;return Object(S.jsx)(m.a,{component:"main",maxWidth:"md",sx:{pb:5},children:Object(S.jsxs)(x.a,{sx:{my:4,alignItems:"center"},children:[Object(S.jsx)(O.a,{sx:{my:1,mx:"auto",p:2},children:Object(S.jsxs)(f.a,{container:!0,spacing:2,children:[Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(g.a,{"data-testid":"header-profile-picture",src:n,alt:"avatar"})}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(v.a,{sx:{fontWeight:"bold",fontSize:{xs:18,sm:e}},variant:"h6",color:"text.secondary",children:a})})]})}),Object(S.jsxs)(O.a,{variant:"outlined",sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(S.jsx)(O.a,{elevation:3,sx:{textAlign:"center",p:1,px:2},children:Object(S.jsx)(v.a,{variant:"h5",color:"text.primary",children:"Score: ".concat(r," points")})}),Object(S.jsx)(v.a,{sx:{pt:2,pb:1,fontSize:{xs:16,sm:e},fontWeight:"regular"},color:"text.primary",children:"You scored ".concat(i," out of 5 questions")}),i>=3&&Object(S.jsx)(v.a,{sx:{mb:2,fontStyle:"oblique",fontWeight:"regular",textDecoration:"underline",fontSize:{xs:18,sm:e}},children:"Good Job!"}),Object(S.jsx)(y.a,{variant:"outlined","data-testid":"btn-play-again",color:"primary",onClick:function(){return c.push("/trivia-game")},sx:{mb:1},children:"Play Again"}),Object(S.jsx)(y.a,{variant:"contained","data-testid":"btn-ranking",color:"primary",onClick:function(){return c.push("/trivia-game/ranking")},children:"Ranking"})]})]})})}}]),n}(a.Component),C=n(43),w=n(193),I=n(182),A=n(205),N=n(213),q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.timer;return Object(S.jsxs)(N.a,{sx:{position:"relative",display:"inline-flex"},children:[Object(S.jsx)(N.a,{sx:{top:0,left:0,bottom:25,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)(I.a,{sx:{fontSize:20}})}),Object(S.jsx)(A.a,{variant:"determinate",value:3.33*e,sx:{color:"#006600"},size:70,thickness:3}),Object(S.jsx)(N.a,{sx:{top:22,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)(v.a,{sx:{fontWeight:600,fontSize:26},variant:"h6",component:"div",color:"text.secondary",children:e})})]})}}]),n}(r.a.Component),W=n(15),E=function(){return{disabledGreen:{"&:disabled":{borderColor:"black !important",border:"3px solid black !important",background:"linear-gradient(45deg, #1df401 30%, #1df401 90%)",color:"#212121 !important"}},disabledRed:{"&:disabled":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}},B=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"randomAnswers",value:function(e){var t=this.props,n=t.handler,a=t.classes,r=t.state,i=r.questionNumber,c=r.clicked,s=[e[i].correct_answer].concat(Object(W.a)(e[i].incorrect_answers)).sort();return Object(S.jsx)(x.a,{spacing:2,children:s.map((function(t,r){return t===e[i].correct_answer?Object(S.jsx)(y.a,{name:"correct-answer",variant:"outlined",onClick:n,"data-testid":"correct-answer",disabled:c,id:"correct",className:a.disabledGreen,children:decodeURIComponent(t)},r):Object(S.jsx)(y.a,{variant:"outlined",type:"button",disabled:c,id:r,className:a.disabledRed,"data-testid":"wrong-answer-".concat(r),onClick:n,children:decodeURIComponent(t)},r)}))})}},{key:"render",value:function(){var e=this.props,t=e.nextButton,n=e.questions,a=e.state,r=a.questionNumber,i=a.clicked;return Object(S.jsxs)(O.a,{variant:"outlined",sx:{maxWidth:{xs:"80%"},my:{xs:1,md:2},p:2,pb:5,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(S.jsx)(O.a,{elevation:3,sx:{textAlign:"center",p:1},children:Object(S.jsx)(v.a,{sx:{fontSize:{xs:18,md:20},fontWeight:"bold"},children:decodeURIComponent(n[r].category)})}),Object(S.jsx)(v.a,{variant:"h6",sx:{py:3,fontWeight:"regular",textAlign:"center"},gutterBottom:!0,children:decodeURIComponent(n[r].question)}),this.randomAnswers(n),i&&Object(S.jsx)(y.a,{sx:{mt:2},variant:"contained","data-testid":"btn-next",onClick:function(){return t(r)},children:"Next"})]})}}]),n}(r.a.Component),T=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={clicked:!1,timer:30,questionNumber:0,playerScore:0,playerAssertions:0},a.handleClick=a.handleClick.bind(Object(C.a)(a)),a.setTimer=a.setTimer.bind(Object(C.a)(a)),a.nextButton=a.nextButton.bind(Object(C.a)(a)),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillUnmount",value:function(){!function(){var e=JSON.parse(localStorage.getItem("state")),t={name:e.player.name,score:e.player.score,picture:e.player.picture},n=JSON.parse(localStorage.getItem("ranking"));n?localStorage.setItem("ranking",JSON.stringify([].concat(Object(W.a)(n),[t]))):localStorage.setItem("ranking",JSON.stringify([t]))}()}},{key:"handleClick",value:function(e){var t=e.target,n=this.state,a=n.timer,r=n.questionNumber,i=this.props.questions[r].difficulty,c={easy:1,medium:2,hard:3};this.setState({clicked:!0}),"correct-answer"===t.name&&this.setState((function(e){return{playerScore:e.playerScore+10+a*c[i],playerAssertions:e.playerAssertions+1}}))}},{key:"setTimer",value:function(){var e=this;this.setState({timer:30});var t=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}),(function(){var n=e.state,a=n.timer,r=n.clicked;(a<=0||r)&&(clearInterval(t),e.setState({clicked:!0}))}))}),1e3)}},{key:"nextButton",value:function(e){var t=this,n=this.props,a=n.history,r=n.questions,i=n.player;e<r.length-1?this.setState((function(e){return{questionNumber:e.questionNumber+1,clicked:!1}}),(function(){t.setTimer()})):(!function(e,t){var n=e.playerAssertions,a=e.playerScore,r={player:{name:t.name,assertions:n,score:a,gravatarEmail:t.email,picture:t.avatar}};localStorage.setItem("state",JSON.stringify(r))}(this.state,i),a.push("/trivia-game/feedback"))}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.questions,a=e.classes,r=this.state,i=r.timer,c=r.questionNumber,s=r.playerScore;return Object(S.jsxs)(m.a,{component:"main",maxWidth:"md",sx:{pb:5},children:[Object(S.jsxs)(x.a,{sx:{my:4,alignItems:"center"},children:[Object(S.jsx)(g.a,{sx:{height:60,width:60},src:t.avatar,alt:"Player Image Avatar"}),Object(S.jsx)(v.a,{variant:"h6",children:t.name}),Object(S.jsx)(v.a,{variant:"h6",sx:{fontWeight:"regular"},children:"".concat(s," Points")}),Object(S.jsx)(q,{timer:i}),Object(S.jsx)(B,{state:this.state,questions:n,classes:a,handler:this.handleClick,nextButton:this.nextButton})]}),Object(S.jsx)("hr",{style:{color:"#000000",backgroundColor:"#000000",width:"80%",borderColor:"#000000"}}),Object(S.jsx)(v.a,{variant:"h6",component:"div",sx:{pt:2,pb:4,fontWeight:"regular",textAlign:"center"},gutterBottom:!0,children:"".concat(c+1,"/5")})]})}}]),n}(r.a.Component),z=Object(o.b)((function(e){var t=e.user;return{player:t.player,questions:t.questions}}))(Object(w.a)(E)(T)),J=n(3),_=n(22),P=n(192),R=n(206),D="SET_PLAYER_INFO",U="SET_QUESTIONS",F="SET_SETTINGS",G=n(52),M=n.n(G),L=n(72),Q=n(100),Y=n.n(Q),H=function(){var e=Object(L.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("token",e.token)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(L.a)(M.a.mark((function e(t){var n,a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y()(t.email).toString(),e.next=3,fetch("".concat("https://www.gravatar.com/avatar/").concat(n)).then((function(e){return e.url}));case 3:return a=e.sent,r=Object(_.a)(Object(_.a)({},t),{},{avatar:a}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(L.a)(M.a.mark((function e(t,n){var a,r,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(n),r="https://opentdb.com/api.php?amount=5&encode=url3986",a.forEach((function(e,t){"All"!==n[e]&&(r+="&".concat(a[t],"=").concat(n[e]))})),e.next=5,fetch("".concat(r,"&").concat(t)).then((function(e){return e.json()})).then((function(e){return e.results}));case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function K(){return Object(S.jsxs)("footer",{children:[Object(S.jsx)("hr",{}),Object(S.jsxs)(v.a,{sx:{mt:2,pb:2},variant:"body2",color:"text.secondary",align:"center",children:["\xa9 ",Object(S.jsx)(R.a,{color:"text.primary",target:"_blank",href:"https://github.com/matheuspor/trivia-game",children:"matheuspor"})," 2021"]})]})}var X=n(202);function Z(e){var t=e.open;return Object(S.jsx)(X.a,{sx:{color:"#fff"},open:t,children:Object(S.jsx)(A.a,{color:"inherit"})})}var ee=n.p+"static/media/trivia.7e9181d3.png",te=function(){return{logo:{animation:"shake infinite 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both"}}},ne=n(14),ae=n(208),re=n(187),ie=n(209),ce=n(211),se=n(188),oe=n(105),le=Object(oe.a)({palette:{background:{default:"#fafafa"},primary:{main:"#212121"},secondary:{main:"#9e9e9e"}}}),ue=n(197);function de(e){var t=e.name,n=e.values,a=e.handler;return Object(S.jsxs)(P.a,{defaultValue:"",onChange:a,select:!0,label:"".concat(t[0].toUpperCase()).concat(t.substr(1)),name:t,children:[Object(S.jsx)(ue.a,{value:"All",children:"All"}),"category"===t?n.map((function(e){return Object(S.jsx)(ue.a,{value:e.name,children:e.name},e.id)})):n.map((function(e){return"True/False"===e?Object(S.jsx)(ue.a,{value:"boolean",children:e},"boolean"):Object(S.jsx)(ue.a,{value:e.toLowerCase(),children:e},e)}))]})}var je=n(210);function be(e){var t=e.openError,n=e.setOpenError;return Object(S.jsxs)(ae.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsx)(re.a,{id:"alert-dialog-title",children:"Error: Unable to find questions with the current settings."}),Object(S.jsx)(ie.a,{children:Object(S.jsx)(je.a,{id:"alert-dialog-description",children:"Please change the Category, Difficulty and/or Type."})}),Object(S.jsx)(ce.a,{children:Object(S.jsx)(y.a,{onClick:function(){return n(!1)},autofocus:!0,children:"Close"})})]})}var he=Object(o.b)(null,(function(e){return{sendSettings:function(t){return e(function(e){return{type:F,payload:e}}(t))}}}))((function(e){var t=e.setOpenSettings,n=e.sendSettings,r=e.openSettings,i=Object(a.useState)(!1),c=Object(ne.a)(i,2),s=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(ne.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)({category:"All",difficulty:"All",type:"All"}),h=Object(ne.a)(b,2),p=h[0],m=h[1],O=JSON.parse(localStorage.getItem("categories"));function g(e){var t=e.target,n=t.name,a=t.value;if("category"===n){var r=O.find((function(e){return e.name===a}));m(Object(_.a)(Object(_.a)({},p),{},Object(J.a)({},n,r?r.id:"All")))}else m(Object(_.a)(Object(_.a)({},p),{},Object(J.a)({},n,a)))}return Object(S.jsxs)(ae.a,{open:r,children:[Object(S.jsx)(re.a,{id:"alert-dialog-title",children:Object(S.jsxs)(f.a,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",children:[Object(S.jsx)(v.a,{variant:"h2",sx:{fontSize:42},children:"Settings"}),Object(S.jsx)(se.a,{sx:{fontSize:50}})]})}),Object(S.jsx)(ie.a,{children:Object(S.jsxs)(x.a,{spacing:3,sx:{mt:1},children:[Object(S.jsx)(de,{name:"category",values:O,handler:g}),Object(S.jsx)(de,{name:"difficulty",values:["Easy","Medium","Hard"],handler:g}),Object(S.jsx)(de,{name:"type",values:["Multiple","True/False"],handler:g})]})}),Object(S.jsx)(ce.a,{children:Object(S.jsx)(y.a,{variant:"contained",type:"button",onClick:function(){n(p),o(!0);var e=localStorage.getItem("token");$(e,p).then((function(e){e.length?(t(!1),o(!1)):(j(!0),o(!1))}))},size:"medium",color:"primary",sx:{"&:hover":{backgroundColor:le.palette.secondary.main}},children:"Save"})}),Object(S.jsx)(be,{openError:d,setOpenError:j}),Object(S.jsx)(Z,{open:s})]})})),pe=(n(137),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(j.a)(this,n);var r=(a=t.call(this,e)).props.player,i=r.name,c=r.email;return a.state={user:{name:i,email:c},openBackdrop:!0,openSettings:!1},a.handleChange=a.handleChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),H().then((function(){fetch("https://opentdb.com/api_category.php").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("categories",JSON.stringify(e.trivia_categories))})),a.setState({openBackdrop:!1})})),a}return Object(b.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((function(e){return{user:Object(_.a)(Object(_.a)({},e.user),{},Object(J.a)({},n,a))}}))}},{key:"handleSubmit",value:function(e){var t=this.props,n=t.sendQuestions,a=t.sendPlayer,r=t.settings,i=t.history,c=this.state.user,s=localStorage.getItem("token");e.preventDefault(),this.setState({openBackdrop:!0}),V(c).then((function(e){a(e),$(s,r).then((function(e){n(e),i.push("/trivia-game/game")}))}))}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.user,r=n.openBackdrop,i=n.openSettings;return Object(S.jsx)(m.a,{component:"main",maxWidth:"xs",children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Z,{open:r}),Object(S.jsx)(he,{openSettings:i,setOpenSettings:function(t){return e.setState({openSettings:t})}}),r||Object(S.jsxs)(x.a,{component:"form",onSubmit:this.handleSubmit,spacing:3,sx:{my:4},children:[Object(S.jsx)("img",{src:ee,className:t.logo,alt:"logo"}),Object(S.jsx)(P.a,{name:"name",type:"text",label:"Name:",value:a.name,autoComplete:"name",onChange:this.handleChange,required:!0}),Object(S.jsx)(P.a,{name:"email",type:"email",label:"Gravatar email:",value:a.email,autoComplete:"email",onChange:this.handleChange,helperText:Object(S.jsx)(R.a,{href:"https://en.gravatar.com/",target:"_blank",underline:"always",children:"Gravatar"})}),Object(S.jsx)(y.a,{type:"submit",fullWidth:!0,disabled:!a.name,variant:"contained",color:"primary",children:"Play"}),Object(S.jsx)(y.a,{type:"button",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.setState({openSettings:!0})},children:"Settings"}),Object(S.jsx)(K,{})]})]})})}}]),n}(r.a.Component)),me=Object(o.b)((function(e){var t=e.user;return{player:t.player,settings:t.settings}}),(function(e){return{sendQuestions:function(t){return e(function(e){return{type:U,payload:e}}(t))},sendPlayer:function(t){return e(function(e){return{type:D,payload:e}}(t))}}}))(Object(w.a)(te)(pe)),xe=n(207),Oe=n(196),fe=n(212),ge=n(190),ve=n(189),ye=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking")),t=this.props.history;return Object(S.jsx)(m.a,{component:"main",children:Object(S.jsxs)(x.a,{sx:{alignItems:"center",my:4},children:[Object(S.jsxs)(f.a,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",sx:{py:2},children:[Object(S.jsx)(v.a,{variant:"h2",sx:{fontSize:40},children:"Leaderboard"}),Object(S.jsx)(ve.a,{sx:{fontSize:60}})]}),Object(S.jsxs)(O.a,{variant:"outlined",sx:{width:250,px:2,pb:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(S.jsx)(xe.a,{sx:{mb:2},children:e&&e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return t<10&&Object(S.jsxs)(Oe.a,{divider:!0,children:[Object(S.jsx)(v.a,{variant:"h6",sx:{fontSize:18},children:t+1}),Object(S.jsx)(fe.a,{sx:{ml:1},children:Object(S.jsx)(g.a,{sx:{width:45,height:45},src:e.picture})}),Object(S.jsx)(ge.a,{primary:e.name,secondary:Object(S.jsxs)(v.a,{sx:{display:"inline",fontWeight:"bold"},component:"span",variant:"body2",color:"text.primary",children:[e.score," ","Points"]})})]},t)}))}),Object(S.jsx)(y.a,{variant:"contained",type:"button","data-testid":"btn-go-home",onClick:function(){return t.push("/trivia-game")},children:"Play Again"})]})]})})}}]),n}(r.a.Component);function Se(){return Object(S.jsxs)(d.c,{children:[Object(S.jsx)(d.a,{exact:!0,path:"/trivia-game",component:me}),Object(S.jsx)(d.a,{path:"/trivia-game/game",component:z}),Object(S.jsx)(d.a,{path:"/trivia-game/feedback",component:k}),Object(S.jsx)(d.a,{path:"/trivia-game/ranking",component:ye})]})}var ke=n(54),Ce=n(103),we=n(104),Ie={player:{name:"",email:""},questions:"",settings:{category:"All",difficulty:"All",type:"All"}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(_.a)(Object(_.a)({},e),{},{player:t.payload});case U:return Object(_.a)(Object(_.a)({},e),{},{questions:t.payload});case F:return Object(_.a)(Object(_.a)({},e),{},{settings:t.payload});default:return e}},Ne=Object(ke.combineReducers)({user:Ae}),qe=Object(ke.createStore)(Ne,Object(Ce.composeWithDevTools)(Object(ke.applyMiddleware)(we.a)));window.Cypress&&(window.store=qe);var We=qe;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(S.jsx)(s.a,{children:Object(S.jsx)(o.a,{store:We,children:Object(S.jsxs)(l.c,{theme:le,children:[Object(S.jsx)(u.a,{}),Object(S.jsx)(Se,{})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[141,1,2]]]);
//# sourceMappingURL=main.3c126f42.chunk.js.map