(this["webpackJsonptrivia-game"]=this["webpackJsonptrivia-game"]||[]).push([[0],{142:function(e,t,n){},154:function(e,t){},155:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(36),c=n.n(i),s=(n(142),n(92)),o=n(47),l=n(25),u=n(19),d=n(15),j=n(37),h=n(38),b=n(52),m=n(50),p=n(48),x=n(115),f=n.n(x),O=n(211),g=n(231),v=n(236),y=n(70),S=n(237),k=n(214),C=n(232),w=n(238),I=n(226),A=n(1),P=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={clicked:!1,timer:30,questionNumber:0,PlayerScore:0,PlayerAssertions:0},a.handleClick=a.handleClick.bind(Object(b.a)(a)),a.setTimer=a.setTimer.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setTimer(),this.updateLocalStorage()}},{key:"componentWillUnmount",value:function(){var e=JSON.parse(localStorage.getItem("state")),t={name:e.player.name,score:e.player.score,picture:e.player.picture},n=JSON.parse(localStorage.getItem("ranking"));n?localStorage.setItem("ranking",JSON.stringify([].concat(Object(d.a)(n),[t]))):localStorage.setItem("ranking",JSON.stringify([t]))}},{key:"handleClick",value:function(e){var t=this,n=e.target,a=this.state,r=a.timer,i=a.questionNumber,c=this.props.questions[i].difficulty,s={easy:1,medium:2,hard:3};this.setState({clicked:!0}),"correct-answer"===n.name&&this.setState((function(e){return{PlayerScore:e.PlayerScore+10+r*s[c],PlayerAssertions:e.PlayerAssertions+1}}),(function(){t.updateLocalStorage()}))}},{key:"setTimer",value:function(){var e=this;this.setState({timer:30});var t=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}),(function(){var n=e.state,a=n.timer,r=n.clicked;(a<=0||r)&&(clearInterval(t),e.setState({clicked:!0}))}))}),1e3)}},{key:"updateLocalStorage",value:function(){var e=this.state,t=e.PlayerAssertions,n=e.PlayerScore,a=this.props.player,r={player:{name:a.name,assertions:t,score:n,gravatarEmail:a.email,picture:a.avatar}};localStorage.setItem("state",JSON.stringify(r))}},{key:"randomAnswers",value:function(e){var t=this,n=this.state,a=n.questionNumber,r=n.clicked,i=this.props.classes,c=[e[a].correct_answer].concat(Object(d.a)(e[a].incorrect_answers)).sort();return Object(A.jsx)(O.a,{sx:{display:"flex",flexDirection:"column"},children:c.map((function(n,c){return n===e[a].correct_answer?Object(A.jsx)(g.a,{name:"correct-answer",variant:"outlined",sx:{my:1},onClick:t.handleClick,"data-testid":"correct-answer",disabled:r,id:"correct",className:i.disabledGreen,children:decodeURIComponent(n)},c):Object(A.jsx)(g.a,{variant:"outlined",sx:{my:1},type:"button",disabled:r,id:c,className:i.disabledRed,"data-testid":"wrong-answer-".concat(c),onClick:t.handleClick,children:decodeURIComponent(n)},c)}))})}},{key:"nextButton",value:function(e){var t=this,n=this.props,a=n.history;e<n.questions.length-1?this.setState((function(e){return{questionNumber:e.questionNumber+1,clicked:!1}}),(function(){t.setTimer()})):a.push("/trivia-game/feedback")}},{key:"circularProgressWithLabel",value:function(e){return Object(A.jsxs)(O.a,{sx:{position:"relative",display:"inline-flex"},children:[Object(A.jsx)(O.a,{sx:{top:0,left:0,bottom:25,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(A.jsx)(f.a,{sx:{fontSize:20}})}),Object(A.jsx)(v.a,{variant:"determinate",value:3.33*e,sx:{color:"#006600"},size:70,thickness:3}),Object(A.jsx)(O.a,{sx:{top:22,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(A.jsx)(y.a,{sx:{fontWeight:600,fontSize:26},variant:"h6",component:"div",color:"text.secondary",children:e})})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,a=t.questions,r=this.state,i=r.timer,c=r.questionNumber,s=r.PlayerScore,o=r.clicked;return Object(A.jsxs)(S.a,{component:"main",maxWidth:"md",sx:{pb:5},children:[Object(A.jsx)(k.a,{}),Object(A.jsxs)(O.a,{sx:{marginTop:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(C.a,{sx:{height:50,width:60},src:n.avatar,alt:"Player Image Avatar"}),Object(A.jsx)(y.a,{variant:"h6",children:n.name}),Object(A.jsxs)(y.a,{variant:"h6",sx:{fontWeight:"regular"},children:[s," ","Points"]}),this.circularProgressWithLabel(i),Object(A.jsxs)(w.a,{variant:"outlined",sx:{maxWidth:{xs:"80%"},my:{xs:1,md:2},p:2,pb:5,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(w.a,{elevation:"3",sx:{textAlign:"center",p:1},children:Object(A.jsx)(y.a,{sx:{fontSize:{xs:18,md:20},fontWeight:"bold"},children:decodeURIComponent(a[c].category)})}),Object(A.jsx)(y.a,{variant:"h6",sx:{py:3,fontWeight:"regular",textAlign:"center"},gutterBottom:!0,children:decodeURIComponent(a[c].question)}),this.randomAnswers(a),o&&Object(A.jsx)(g.a,{sx:{mt:2},variant:"contained","data-testid":"btn-next",onClick:function(){return e.nextButton(c)},children:"Next"})]})]}),Object(A.jsx)("hr",{style:{color:"#000000",backgroundColor:"#000000",width:"80%",borderColor:"#000000"}}),Object(A.jsx)(y.a,{variant:"h6",component:"div",sx:{pt:2,pb:4,fontWeight:"regular",textAlign:"center"},gutterBottom:!0,children:"".concat(c+1,"/5")})]})}}]),n}(r.a.Component),N=Object(o.b)((function(e){return{questions:e.user.questions,player:e.user.player}}))(Object(I.a)((function(){return{disabledGreen:{"&:disabled":{borderColor:"black !important",border:"3px solid black !important",background:"linear-gradient(45deg, #1df401 30%, #1df401 90%)",color:"#212121 !important"}},disabledRed:{"&:disabled":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}}))(P)),W=n(3),q=n(24),T=n(14),E=n(217),D=n(235),z=n(240),_=n(219),B=n(242),J=n(218),F=n(57),R=n.n(F),U=n(81),L=function(){var e=Object(U.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("token",e.token)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(U.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.gravatar.com/avatar/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(U.a)(R.a.mark((function e(t,n){var a,r,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(n),r="https://opentdb.com/api.php?amount=5&encode=url3986",a.forEach((function(e,t){"All"!==n[e]&&(r+="&".concat(a[t],"=").concat(n[e]))})),e.next=5,fetch("".concat(r,"&").concat(t)).then((function(e){return e.json()})).then((function(e){return e.results}));case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=n(233);function Y(e){var t=e.open;return Object(A.jsx)(Q.a,{sx:{color:"#fff"},open:t,children:Object(A.jsx)(v.a,{color:"inherit"})})}var H="SET_PLAYER_INFO",$="SET_QUESTIONS",K="SET_SETTINGS",V=n(100),X=Object(V.a)({palette:{background:{default:"#fafafa"},primary:{main:"#212121"},secondary:{main:"#9e9e9e"}}}),Z=n(239),ee=n(241);function te(e){var t=e.openError,n=e.setOpenError;return Object(A.jsxs)(Z.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(A.jsx)(E.a,{id:"alert-dialog-title",children:"Error: Unable to find questions with the current settings."}),Object(A.jsx)(z.a,{children:Object(A.jsx)(ee.a,{id:"alert-dialog-description",children:"Please change the Category, Difficulty and/or Type."})}),Object(A.jsx)(B.a,{children:Object(A.jsx)(g.a,{onClick:function(){return n(!1)},autofocus:!0,children:"Close"})})]})}var ne=n(224),ae=n(234);function re(e){var t=e.name,n=e.values,a=e.handler;return Object(A.jsxs)(ne.a,{onChange:a,select:!0,label:"".concat(t[0].toUpperCase()).concat(t.substr(1)),name:t,children:[Object(A.jsx)(ae.a,{value:"All",children:"All"}),"category"===t?n.trivia_categories.map((function(e){return Object(A.jsx)(ae.a,{value:e.name,children:e.name},e.id)})):n.map((function(e){return"True/False"===e?Object(A.jsx)(ae.a,{value:"boolean",children:e},"boolean"):Object(A.jsx)(ae.a,{value:e.toLowerCase(),children:e},e)}))]})}var ie=Object(o.b)(null,(function(e){return{sendSettings:function(t){return e(function(e){return{type:K,payload:e}}(t))}}}))((function(e){var t=e.handler,n=e.sendSettings,r=Object(a.useState)(!1),i=Object(T.a)(r,2),c=i[0],s=i[1],o=Object(a.useState)(!1),l=Object(T.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)({category:"All",difficulty:"All",type:"All"}),h=Object(T.a)(j,2),b=h[0],m=h[1],p=JSON.parse(localStorage.getItem("categories"));function x(e){var t=e.target,n=t.name,a=t.value;if("category"===n){var r=p.trivia_categories.find((function(e){return e.name===a}));m(Object(q.a)(Object(q.a)({},b),{},Object(W.a)({},n,r?r.id:"All")))}else m(Object(q.a)(Object(q.a)({},b),{},Object(W.a)({},n,a)))}return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{dividers:!0,id:"alert-dialog-title",children:Object(A.jsxs)(D.a,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",children:[Object(A.jsx)(y.a,{variant:"h2",sx:{fontSize:42},children:"Settings"}),Object(A.jsx)(J.a,{sx:{fontSize:50}})]})}),Object(A.jsx)(z.a,{children:Object(A.jsxs)(_.a,{spacing:3,sx:{my:1},children:[Object(A.jsx)(re,{name:"category",values:p,handler:x}),Object(A.jsx)(re,{name:"difficulty",values:["Easy","Medium","Hard"],handler:x}),Object(A.jsx)(re,{name:"type",values:["Multiple","True/False"],handler:x})]})}),Object(A.jsx)(B.a,{children:Object(A.jsx)(g.a,{variant:"contained",type:"button",onClick:function(){n(b),s(!0);var e=localStorage.getItem("token");M(e,b).then((function(e){e.length?(t(!1),s(!1)):(d(!0),s(!1))}))},autofocus:!0,size:"medium",color:"primary",sx:{"&:hover":{backgroundColor:X.palette.secondary.main}},children:"Save"})}),Object(A.jsx)(te,{openError:u,setOpenError:d}),Object(A.jsx)(Y,{open:c})]})})),ce=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=this.props.history;return Object(A.jsxs)(S.a,{component:"main",maxWidth:"md",sx:{pb:5},children:[Object(A.jsx)(k.a,{}),Object(A.jsxs)(O.a,{sx:{marginTop:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(w.a,{sx:{maxWidth:400,my:1,mx:"auto",p:2},children:Object(A.jsxs)(D.a,{container:!0,spacing:2,children:[Object(A.jsx)(D.a,{item:!0,children:Object(A.jsx)(C.a,{"data-testid":"header-profile-picture",src:e.picture,alt:"avatar"})}),Object(A.jsx)(D.a,{item:!0,xs:!0,children:Object(A.jsx)(y.a,{sx:{fontWeight:"bold"},variant:"h6",color:"text.secondary",children:e.name})})]})}),Object(A.jsxs)(w.a,{variant:"outlined",sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(w.a,{elevation:"3",sx:{textAlign:"center",p:1,px:2},children:Object(A.jsx)(y.a,{variant:"h5",color:"text.primary",children:"Score: ".concat(e.score," points")})}),Object(A.jsx)(y.a,{sx:{pt:2,pb:1,fontSize:{xs:16,sm:"h6.fontSize"},fontWeight:"regular"},color:"text.primary",children:"You scored ".concat(e.assertions," out of 5 questions")}),e.assertions>=3&&Object(A.jsx)(y.a,{sx:{mb:2,fontStyle:"oblique",fontWeight:"regular",textDecoration:"underline",fontSize:{xs:18,sm:"h6.fontSize"}},children:"Good Job!"}),Object(A.jsx)(g.a,{variant:"outlined","data-testid":"btn-play-again",color:"primary",onClick:function(){return t.push("/trivia-game")},sx:{mb:1},children:"Play Again"}),Object(A.jsx)(g.a,{variant:"contained","data-testid":"btn-ranking",color:"primary",onClick:function(){return t.push("/trivia-game/ranking")},children:"Ranking"})]})]})]})}}]),n}(a.Component),se=n(243),oe=n(229),le=n(222),ue=n(244),de=n(223),je=n(221),he=n(220),be=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).state={},e}return Object(h.a)(n,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking")),t=this.props.history;return Object(A.jsxs)(S.a,{component:"main",children:[Object(A.jsx)(k.a,{}),Object(A.jsxs)(he.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:5},children:[Object(A.jsxs)(D.a,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",sx:{py:2},children:[Object(A.jsx)(y.a,{variant:"h2",sx:{fontSize:40},children:"Leaderboard"}),Object(A.jsx)(je.a,{sx:{fontSize:60}})]}),Object(A.jsxs)(w.a,{variant:"outlined",sx:{width:250,px:2,pb:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(se.a,{sx:{mb:2},children:e&&e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return t<10&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(oe.a,{children:[Object(A.jsx)(le.a,{children:Object(A.jsx)(y.a,{sx:{fontWeight:"600"},children:t+1})}),Object(A.jsx)(ue.a,{sx:{ml:1},children:Object(A.jsx)(C.a,{sx:{width:45,height:45},src:e.picture})}),Object(A.jsx)(le.a,{primary:e.name,secondary:Object(A.jsxs)(y.a,{sx:{display:"inline",fontWeight:"bold"},component:"span",variant:"body2",color:"text.primary",children:[e.score," ","Points"]})})]},t),Object(A.jsx)(de.a,{component:"li"})]})}))}),Object(A.jsx)(g.a,{variant:"contained",type:"button","data-testid":"btn-go-home",onClick:function(){return t.push("/trivia-game")},children:"Play Again"})]})]})]})}}]),n}(r.a.Component),me=n(117),pe=n.n(me),xe=n(225),fe=(n(155),n.p+"static/media/trivia.7e9181d3.png");function Oe(e){var t=e.name,n=e.user,a=e.handler;return Object(A.jsx)(g.a,{type:"Play"===t?"submit":"button",fullWidth:!0,disabled:"Play"===t&&!n.name,onClick:a,variant:"contained",sx:{my:2},color:"Play"===t?"primary":"secondary",children:t})}Oe.defaultProps={handler:void 0};var ge=n(245);function ve(e){var t=e.name,n=e.handler,a=e.value;return Object(A.jsx)(ne.a,{type:"email"===t?"email":"text",margin:"normal",required:"name"===t,fullWidth:!0,id:"".concat(t[0].toUpperCase()).concat(t.substr(1)),label:"email"===t?"Gravatar email:":"Name:",name:t,autoComplete:t,onChange:n,value:a,helperText:"email"===t&&Object(A.jsx)(ge.a,{href:"https://en.gravatar.com/",target:"_blank",underline:"always",children:"Gravatar"})})}function ye(){return Object(A.jsxs)("footer",{children:[Object(A.jsx)("hr",{}),Object(A.jsxs)(y.a,{sx:{mt:2,pb:2},variant:"body2",color:"text.secondary",align:"center",children:["\xa9 ",Object(A.jsx)(ge.a,{color:"text.primary",target:"_blank",href:"https://github.com/matheuspor",children:"matheuspor"})," 2021"]})]})}var Se=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(j.a)(this,n);var r=(a=t.call(this,e)).props.player,i=r.name,c=r.email;return a.state={user:{name:i,email:c},openBackdrop:!0,openSettings:!1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),L().then((function(){fetch("https://opentdb.com/api_category.php").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("categories",JSON.stringify(e))})),a.setState({openBackdrop:!1})})),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((function(e){return{user:Object(q.a)(Object(q.a)({},e.user),{},Object(W.a)({},n,a))}}))}},{key:"handleSubmit",value:function(e){var t=this,n=this.props,a=n.sendQuestions,r=n.sendPlayer,i=n.settings,c=n.history,s=this.state.user;e.preventDefault(),this.setState({openBackdrop:!0});var o=pe()(s.email).toString();G(o).then((function(e){var n=e.url;t.setState((function(e){return{user:Object(q.a)(Object(q.a)({},e.user),{},{avatar:n})}}),(function(){var e=t.state;r(e.user)}))})),M(localStorage.getItem("token"),i).then((function(e){a(e),c.push("/trivia-game/game")}))}},{key:"makeDialog",value:function(){var e=this,t=this.state.openSettings;return Object(A.jsx)(Z.a,{open:t,children:Object(A.jsx)(ie,{openSettings:t,handler:function(t){return e.setState({openSettings:t})}})})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.user,r=n.openBackdrop;return Object(A.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(Y,{open:r}),this.makeDialog(),r||Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(k.a,{}),Object(A.jsxs)(O.a,{sx:{mt:6,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)("img",{src:fe,className:t.logo,alt:"logo"}),Object(A.jsxs)(O.a,{component:"form",onSubmit:this.handleSubmit,sx:{mt:2},children:[Object(A.jsx)(ve,{name:"name",value:a.name,handler:this.handleChange}),Object(A.jsx)(ve,{name:"email",value:a.email,handler:this.handleChange}),Object(A.jsx)(Oe,{name:"Play",user:a}),Object(A.jsx)(Oe,{name:"Settings",user:a,handler:function(){return e.setState({openSettings:!0})}})]})]}),Object(A.jsx)(ye,{})]})]})}}]),n}(r.a.Component),ke=Object(o.b)((function(e){var t=e.user;return{player:t.player,settings:t.settings}}),(function(e){return{sendQuestions:function(t){return e(function(e){return{type:$,payload:e}}(t))},sendPlayer:function(t){return e(function(e){return{type:H,payload:e}}(t))}}}))(Object(xe.a)((function(){var e;return{logo:(e={height:"6em"},Object(W.a)(e,X.breakpoints.up("sm"),{height:"9em"}),Object(W.a)(e,"mb","1em"),Object(W.a)(e,"animation","shake infinite 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both"),e)}}))(Se)),Ce=Object(a.createContext)();var we=function(e){var t=e.children,n=Object(a.useState)({category:"All",difficulty:"All",type:"All"}),r=Object(T.a)(n,2),i=r[0],c=r[1];return Object(A.jsx)(Ce.Provider,{value:{settings:i,setNewSetting:function(e){c(e)}},children:t})};function Ie(){return Object(A.jsx)(we,{children:Object(A.jsxs)(u.c,{children:[Object(A.jsx)(u.a,{exact:!0,path:"/trivia-game",component:ke}),Object(A.jsx)(u.a,{path:"/trivia-game/game",component:N}),Object(A.jsx)(u.a,{path:"/trivia-game/settings",component:ie}),Object(A.jsx)(u.a,{path:"/trivia-game/feedback",component:ce}),Object(A.jsx)(u.a,{path:"/trivia-game/ranking",component:be})]})})}var Ae=n(60),Pe=n(119),Ne=n(120),We={player:{name:"",email:""},questions:"",settings:{category:"All",difficulty:"All",type:"All"}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(q.a)(Object(q.a)({},e),{},{player:t.payload});case $:return Object(q.a)(Object(q.a)({},e),{},{questions:t.payload});case K:return Object(q.a)(Object(q.a)({},e),{},{settings:t.payload});default:return e}},Te=Object(Ae.combineReducers)({user:qe}),Ee=Object(Ae.createStore)(Te,Object(Pe.composeWithDevTools)(Object(Ae.applyMiddleware)(Ne.a)));window.Cypress&&(window.store=Ee);var De=Ee;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(A.jsx)(s.a,{children:Object(A.jsx)(o.a,{store:De,children:Object(A.jsx)(l.c,{theme:X,children:Object(A.jsx)(Ie,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[159,1,2]]]);
//# sourceMappingURL=main.75de4299.chunk.js.map